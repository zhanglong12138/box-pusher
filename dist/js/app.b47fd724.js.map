{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/BoxPusher.vue?481b","webpack:///./src/App.vue","webpack:///./src/components/BoxPusher.vue","webpack:///./src/components/BoxPusher.vue?79cb","webpack:///./src/components/MapEditor.vue","webpack:///./src/components/MapEditor.vue?9c87","webpack:///./src/App.vue?8ecf","webpack:///./src/main.js","webpack:///./src/App.vue?cace","webpack:///./src/components/MapEditor.vue?923d"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","_createElementBlock","_hoisted_1","$data","status","_createBlock","_component_BoxPusher","ref","onChangestatus","$options","changestatus","fmap","_ctx","map","fstage","stage","_component_MapEditor","onPlay","play","_createElementVNode","_hoisted_2","onClick","_cache","args","data-key","importmap","type","id","onChange","uploaded","share","_hoisted_3","_hoisted_4","show","_Fragment","_renderList","active_map","item","index","block","rowindex","_normalizeClass","getBlock","props","Array","default","static_map","key2direction","key_arr","beforeCreate","app","this","onkeydown","e","move","keyCode","created","deepClone","map_init","mounted","computed","player_position","y","x","complete_count","count","methods","alert","box_count","calc_block","document","getElementById","click","files","target","file","reader","FileReader","onload","Uint8Array","content","TextDecoder","decode","mapjson","JSON","parse","readAsArrayBuffer","$emit","congratulations","cate","getNextblock","direction","step","code","indexOf","orgrin","nextblock","ny","nx","nextblock2","by","bx","obj","newObj","isArray","__exports__","$event","save","playnow","for","_hoisted_5","_hoisted_6","init","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","active_position","keys","keypress","singlecheckmap","getstaticmap","singlemap","createElement","blob","Blob","stringify","download","href","URL","createObjectURL","revokeObjectURL","flag_count","includes","concat","fill","arr","fcode","setBlock","y2","x2","defaultmap","mixins","components","BoxPusher","MapEditor","currentTarget","dataset","render","createApp","App","mount"],"mappings":"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","file":"js/app.b47fd724.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BoxPusher.vue?vue&type=style&index=0&id=e13ec61c&scoped=true&lang=css\"","<!--\n * @author: Taolu\n * @Date: 2021-11-29 09:02:27\n-->\n<template>\n    <div class=\"container\" v-cloak>\n      <BoxPusher v-if=\"status=='default'\" ref=\"stage\" @changestatus=\"changestatus\" :fmap=\"map\" :fstage=\"stage\" />\n      <MapEditor v-if=\"status=='edit'\" @changestatus=\"changestatus\" @play=\"play\" />\n    </div>\n</template>\n\n<script>\nimport BoxPusher from \"./components/BoxPusher\";\nimport MapEditor from \"./components/MapEditor\";\nvar defaultmap = {\n  map:[\n        //0墙 1活动区域 2人物 3箱子 4终点 5箱子和终点重合\n        0, 0, 0, 0, 0, 0, \n        0, 2, 1, 1, 1, 0, \n        0, 1, 3, 3, 1, 0, \n        0, 1, 1, 0, 0, 0,\n        0, 1, 1, 1, 4, 0, \n        0, 1, 1, 1, 4, 0, \n        0, 0, 0, 0, 0, 0,\n      ],\n  stage:[6,7],\n}\nexport default {\n  data(){\n    return {\n      status:'default',\n    }\n  },\n  mixins:[defaultmap],\n  name: 'App',\n  components: {\n    BoxPusher,\n    MapEditor\n  },\n  methods:{\n    changestatus(e){\n      this.status = e.currentTarget.dataset.key;\n    },\n    play(map){\n      this.map = map.map;\n      this.stage = map.stage;\n      this.status = 'default';\n    },\n  }\n}\n</script>\n\n<style>\n[v-cloak]{\n  display:none;\n}\nhtml,body{\n  height:100%;\n  width:100%;\n  margin:0;\n}\n#app{\n  height:100%;\n  width:100%;\n  display:flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.container{\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.menu{\n  font-size: 30px;\n  font-weight: bold;\n  color:orange;\n  display:flex;\n  flex-direction: column;\n  margin-right:100px;\n}\n\n.menu .navbtn{\n  line-height:20px;\n  padding:10px;\n  margin-top:10px;\n  font-size:20px;\n  color:white;\n  border:0;\n  background: orange;\n  font-weight: bold;\n  cursor:pointer;\n}\n</style>\n","<!--\n * @author: Taolu\n * @Date: 2021-11-29 09:02:27\n-->\n<template>\n  <div class=\"container\">\n    <div class=\"menu\" >\n      <nav class=\"navbtn\" @click=\"changestatus\" data-key=\"default\">Play</nav>\n      <nav class=\"navbtn\" @click=\"changestatus\" data-key=\"edit\">Edit map by yourself</nav>\n      <nav class=\"navbtn\" @click=\"importmap\">Import maps <input v-show=\"false\" type=\"file\" id=\"upload\" @change=\"uploaded\" /> </nav>\n      <nav class=\"navbtn\" @click=\"share\">Share Box-pusher!</nav>\n    </div>\n    <div class=\"stage\">\n      <div v-show=\"show\" class=\"win\"></div>\n      <div class=\"row\" v-for=\"(item, index) in active_map\" :key=\"index\">\n        <div\n          :class=\"['block', getBlock(block)]\"\n          v-for=\"(block, rowindex) in item\"\n          :key=\"rowindex\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"BoxPusher\",\n  props:{\n    fmap:{\n      type:Array,\n      default(){\n        return [\n          //0墙 1活动区域 2人物 3箱子 4终点 5箱子和终点重合\n          0, 0, 0, 0, 0, 0, \n          0, 2, 1, 1, 1, 0, \n          0, 1, 3, 3, 1, 0, \n          0, 1, 1, 0, 0, 0,\n          0, 1, 1, 1, 4, 0, \n          0, 1, 1, 1, 4, 0, \n          0, 0, 0, 0, 0, 0,\n        ];\n      }\n    },\n    fstage:{//地图尺寸\n      type:Array,\n      default(){\n        return [6,7];\n      }\n    },\n  },\n  data() {\n    return {\n      static_map: [],\n      active_map: [],\n      key2direction:{\n        \"87\":1,\n        \"38\":1,\n        \"83\":2,\n        \"40\":2,\n        \"65\":3,\n        \"37\":3,\n        \"68\":4,\n        \"39\":4,\n      },\n      key_arr:[87,38,83,40,65,37,68,39],\n      show:false\n    };\n  },\n  beforeCreate() {\n    var app = this;\n    window.onkeydown = function (e) {\n      app.move(e.keyCode);\n    };\n  },\n  created() {\n    this.map = deepClone(this.fmap);\n    this.stage = deepClone(this.fstage);\n    this.map_init();\n  },\n  mounted() {\n    \n  },\n  computed: {\n    player_position() {\n      for (let y in this.active_map) {\n        for (let x in this.active_map[y]) {\n          if (2 === this.active_map[y][x]) return [this.static_map[y][x], +y, +x];\n        }\n      }\n      return [0, 0];\n    },\n    complete_count(){\n      let count = 0;\n      for (let y in this.active_map) {\n        for (let x in this.active_map[y]) {\n          if (3 === this.active_map[y][x] && 4 === this.static_map[y][x]) count++\n        }\n      }\n      return count;\n    }\n  },\n  methods: {\n    map_init(){\n      if (this.map.length != this.stage[0] * this.stage[1]) {\n        alert(\"map data error\");\n      }\n      let map = [];\n      for (let i = 0; i < this.stage[1]; i++) {\n        map.push(this.map.slice(i * this.stage[0], (i + 1) * this.stage[0]));\n      }\n      this.static_map = deepClone(map);\n      this.active_map = deepClone(map);\n      this.box_count = this.calc_block(3);\n    },\n    importmap(){\n      document.getElementById(\"upload\").click();\n    },\n    uploaded(e){\n      var app = this;\n      var files = e.target.files,\n          file = files[0];\n      var reader = new FileReader();\n      reader.onload = function(e) {\n          let data = new Uint8Array(e.target.result);\n          let content = new TextDecoder('gb2312').decode(data);\n          let mapjson = JSON.parse(content);\n          app.map = mapjson.map;\n          app.stage = mapjson.stage;\n          app.map_init();\n      };\n      reader.readAsArrayBuffer(file);\n    },\n    share(){\n      alert(\"Functions is coming! Thanks so much!\");\n    },\n    changestatus(e){\n      this.$emit(\"changestatus\",e);\n    },\n    congratulations(){\n      this.show = true;\n    },\n    calc_block(cate){\n      let count = 0;\n      for(let i in this.map){\n        if(this.map[i]===cate) count++\n      }\n      return count;\n    },\n    getNextblock(direction,y,x,step=1){\n      if(direction==1){\n        return [this.active_map[y-step][x],y-step,x];\n      }\n      if(direction==2){\n        return [this.active_map[y+step][x],y+step,x];\n      }\n      if(direction==3){\n        return [this.active_map[y][x-step],y,x-step];\n      }\n      if(direction==4){\n        return [this.active_map[y][x+step],y,x+step];\n      }\n    },\n    move(code) {\n      let index = this.key_arr.indexOf(code);\n      if(index==-1) return;\n      let direction = this.key2direction[\"\"+code];\n      let [orgrin,y,x] = this.player_position;\n      let [nextblock,ny,nx] = this.getNextblock(direction,y,x);\n      switch(nextblock){\n        case 4:\n        case 1:{\n          this.active_map[ny][nx] = 2;\n          this.active_map[y][x] = orgrin==4?4:1;\n          break;\n        }\n        case 3:{\n          let [nextblock2,by,bx] = this.getNextblock(direction,y,x,2);\n          if([1,4].indexOf(nextblock2)>-1){\n            this.active_map[by][bx] = 3;\n            this.active_map[ny][nx] = 2;\n            this.active_map[y][x] = orgrin==4?4:1;\n          }\n          break;\n        }\n      }\n      if(this.complete_count==this.box_count){\n        this.congratulations();\n      }\n    },\n    getBlock(cate) {\n      return [\"stone\", \"back\", \"player\", \"box\", \"dream\", \"complete\"][cate];\n    },\n  },\n};\n\nfunction deepClone(obj) {\n  let newObj = Array.isArray(obj) ? [] : {};\n  if (obj && typeof obj === \"object\") {\n    for (let key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        newObj[key] =\n          obj && typeof obj[key] === \"object\" ? deepClone(obj[key]) : obj[key];\n      }\n    }\n  }\n  return newObj;\n}\n</script>\n<style scoped>\n.container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position:relative;\n}\n.row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.block {\n  height: 40px;\n  width: 40px;\n  margin: 1px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.stone {\n  background: #c9c9c9;\n  background: url(\"../assets/stone.png\") no-repeat;\n  background-size: contain;\n}\n.back {\n  background: url(\"../assets/back.png\") no-repeat;\n  background-size: contain;\n}\n.player {\n  background: url(\"../assets/pika.png\") no-repeat;\n  background-size: contain;\n}\n.box {\n  background: url(\"../assets/box.png\") no-repeat;\n  background-size: contain;\n}\n.dream {\n  background: url(\"../assets/flag.png\") no-repeat;\n  background-size: contain;\n}\n.complete {\n  background: orange;\n  background: url(\"../assets/box.png\") no-repeat;\n  background-size: contain;\n}\n.win{\n  height:100%;\n  width:100%;\n  position:absolute;\n  left:0;\n  top:0;\n  background: url(\"../assets/win.png\") no-repeat;\n  background-size: contain;\n  animation: trans 1500ms ease-in 1;\n}\n\n@keyframes trans{\n  from{\n    transform: rotate(0deg);\n  }half{\n    transform: rotate(180deg);\n  }to{\n    transform: rotate(360deg);\n  }\n}\n\n.label {\n  height:100%;\n  width:100%;\n  \n}\n</style>\n","import { render } from \"./BoxPusher.vue?vue&type=template&id=e13ec61c&scoped=true\"\nimport script from \"./BoxPusher.vue?vue&type=script&lang=js\"\nexport * from \"./BoxPusher.vue?vue&type=script&lang=js\"\n\nimport \"./BoxPusher.vue?vue&type=style&index=0&id=e13ec61c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/box-pusher/box-pusher/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e13ec61c\"]])\n\nexport default __exports__","<!--\n * @author: Taolu\n * @Date: 2021-11-29 09:02:27\n-->\n<template>\n  <div class=\"container\" v-cloak>\n    \n    <div class=\"menu\" >\n      <nav class=\"navbtn\" @click=\"changestatus\"  data-key=\"default\">Return</nav>\n      <nav class=\"navbtn\" v-if=\"show\" @click=\"show=false\">Reset init data</nav>\n      <nav class=\"navbtn\" v-if=\"show\" @click=\"save\">Save & Output your map</nav>\n      <nav class=\"navbtn\" v-if=\"show\" @click=\"playnow\">Play it right now</nav>\n    </div>\n    <div class=\"stage\">\n      <div v-show=\"!show\">\n        <div class=\"para\">\n          <label for=\"x\">row block：</label><input type=\"number\" id=\"x\" v-model=\"stage[0]\">\n        </div>\n        <div class=\"para\" >\n          <label for=\"y\">column block：</label><input type=\"number\" id=\"y\" v-model=\"stage[1]\">\n        </div>\n        <div class=\"para\">\n          <label for=\"count\">box counts：</label><input type=\"number\" id=\"count\" v-model=\"box_count\">\n        </div>\n        <button class=\"initbtn\" @click=\"init\">Init my map</button>\n      </div>\n      \n      <div class=\"editable\" v-if=\"show\">\n        <div class=\"initData\">\n          row block：{{stage[0]}}\n          <br>\n          column block：{{stage[1]}}\n          <br>\n          box counts：{{box_count}}\n        </div>\n        <div class=\"map\">\n          <div class=\"row\" v-for=\"(item, index) in static_map\" :key=\"index\">\n            <div\n              :class=\"['block', getBlock(block), (rowindex==active_position[0] && index==active_position[1])?'active':'']\"\n              v-for=\"(block, rowindex) in item\"\n              :key=\"rowindex\"\n              @click=\"active_position = [rowindex,index]\"\n            ></div>\n          </div>\n        </div>\n        <div class=\"tips\">\n          1. Clicking at the block or pressing the keybroad with \"w,s,a,d\" to select editable block.\n          <br>\n          2.Inputing numbers with the keys \"0-4\" to change the block function status.\n          <br>\n          3.The box-counts must be equal to that before setting.\n        </div>\n        <div class=\"iconlist\">\n          <div class=\"block stone\"></div>\n          <div class=\"block back\"></div>\n          <div class=\"block player\"></div>\n          <div class=\"block box\"></div>\n          <div class=\"block dream\"></div>\n        </div>\n        <div class=\"iconlist\">\n          <div class=\"block \">0</div>\n          <div class=\"block \">1</div>\n          <div class=\"block \">2</div>\n          <div class=\"block \">3</div>\n          <div class=\"block \">4</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"MapEditor\",\n  data() {\n    return {\n      // static_map: [\n        //0stone 1area moveable spirit 3box 4flag 5completed pointed\n        // [ 0, 0, 0, 0, 0, 0, ], \n        // [ 0, 2, 1, 1, 1, 0, ], \n        // [ 0, 1, 3, 3, 1, 0, ], \n        // [ 0, 1, 1, 0, 0, 0, ],\n        // [ 0, 1, 1, 1, 4, 0, ], \n        // [ 0, 1, 1, 1, 4, 0, ], \n        // [ 0, 0, 0, 0, 0, 0, ],\n      // ],\n      static_map:[],\n      stage: [6, 7],\n      box_count:2,\n      keys:{\n        \"87\":1,\n        \"38\":1,\n        \"83\":2,\n        \"40\":2,\n        \"65\":3,\n        \"37\":3,\n        \"68\":4,\n        \"39\":4,\n\n        \"48\":0,\n        \"96\":0,\n        \"97\":-1,\n        \"49\":-1,\n        \"98\":-2,\n        \"50\":-2,\n        \"99\":-3,\n        \"51\":-3,\n        \"100\":-4,\n        \"52\":-4,\n      },\n      key_arr:[87,38,83,40,65,37,68,39,49,50,51,52,53,96,97,98,99,100,48,96],\n      active_position:[1,1],\n      show:false,\n    };\n  },\n  beforeCreate() {\n\n  },\n  created() {\n    var app = this;\n    window.onkeydown = function (e) {\n      app.keypress(e.keyCode);\n    };\n  },\n  mounted() {},\n  computed: {},\n  methods: {\n    changestatus(e){\n      this.$emit(\"changestatus\",e);\n    },\n    playnow(){\n      if(this.singlecheckmap()){\n        this.$emit(\"play\",{\n          map:this.getstaticmap(),\n          stage:[...this.stage],\n        });\n      }\n    },\n    save(){\n      var singlemap = {\n        map:this.getstaticmap(),\n        stage:[...this.stage],\n      }\n      if(this.singlecheckmap()){\n        var target = document.createElement('a');\n        var blob = new Blob([JSON.stringify(singlemap)]);\n        target.download = 'box-pusher.map.json';\n        target.href = URL.createObjectURL(blob);\n        target.click();\n        URL.revokeObjectURL(blob);\n        target = null;\n      }\n    },\n    singlecheckmap(){\n      let box_count = 0;\n      let flag_count = 0;\n      let static_map = this.getstaticmap();\n      for(let i in static_map){\n        if(static_map[i]===3){\n          box_count += 1\n        }\n        if(static_map[i]===4){\n          flag_count += 1\n        }\n      }\n      if(box_count!==this.box_count){\n        alert(\"Error:box_count incorrect!\");\n        return false;\n      }\n      if(flag_count!==this.box_count){\n        alert(\"Error:flag_count incorrect!\");\n        return false;\n      }\n      if(!static_map.includes(2)){\n        alert(\"Error:no player.Keypress 2 to set player!\");\n        return false;\n      }\n      return true;\n    },\n    getstaticmap(){\n      return [].concat(...this.static_map);\n    },\n    init(){\n      let [x,y] = this.stage;\n      let static_map = [];\n      for(let i=0; i<y; i++){\n        if(i==0 || i==y-1){\n          static_map.push(new Array(x).fill(0));\n        }else{\n          let arr = new Array(x).fill(1);\n          arr[0] = 0;\n          arr[x-1] = 0;\n          static_map.push(arr);\n        }\n      }\n      this.static_map = static_map;\n      this.show = true;\n    },\n    keypress(code){\n      if(!this.show) return;\n      let index = this.key_arr.indexOf(code);\n      if(index==-1) return;\n      let fcode = this.keys[\"\"+code];\n      if(fcode=='undefined') return;\n      switch(fcode){\n        case 1:{\n          if(this.active_position[1]>0){\n            this.active_position[1]--;\n          }\n          break;\n        }\n        case 2:{\n          if(this.active_position[1]<this.stage[1]-1){\n            this.active_position[1]++;\n          }\n          break;\n        }\n        case 3:{\n          if(this.active_position[0]>0){\n            this.active_position[0]--;\n          }\n          break;\n        }\n        case 4:{\n          if(this.active_position[0]<this.stage[0]-1){\n            this.active_position[0]++;\n          }\n          break;\n        }\n        case  0:\n        case -1:\n        case -2:\n        case -3:\n        case -4:\n        case -5:{\n          this.setBlock(this.active_position[1],this.active_position[0],-fcode);\n          break;\n        }\n        default:{\n\n          break;\n        }\n      }\n    },\n    setBlock(y,x,cate){\n      if(cate==2){\n        let index = this.getstaticmap().indexOf(2);\n        if(index>-1){\n          for(let y2 in this.static_map){\n            for(let x2 in this.static_map[y2]){\n              if(this.static_map[y2][x2]===2){\n                this.static_map[y2][x2] = 1;\n                break;\n              }\n            }\n          }\n        }\n      }\n      this.static_map[y][x] = cate;\n    },\n    getBlock(cate) {\n      return [\"stone\", \"back\", \"player\", \"box\", \"dream\", \"complete\"][cate];\n    },\n  },\n};\n</script>\n<style scoped>\n\n.container {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position:relative;\n}\n.row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.block {\n  height: 40px;\n  width: 40px;\n  border: 1px solid white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@keyframes flicker{\n  from{\n    border:2px solid white;\n  }50%{\n    border:2px solid red;\n  }to{\n    border:2px solid white;\n  }\n}\n.active{\n  border:1px solid white;\n  position:relative;\n}\n.active::after{\n  content:\" \";\n  position:absolute;\n  left:-2px;\n  top:-2px;\n  height: 40px;\n  width: 40px;\n  border:2px solid white;\n  animation:flicker ease-in-out 2s infinite;\n}\n.stone {\n  background: #c9c9c9;\n  background: url(\"../assets/stone.png\") no-repeat;\n  background-size: contain;\n}\n.back {\n  background: url(\"../assets/back.png\") no-repeat;\n  background-size: contain;\n}\n.player {\n  background: url(\"../assets/pika.png\") no-repeat;\n  background-size: contain;\n}\n.box {\n  background: url(\"../assets/box.png\") no-repeat;\n  background-size: contain;\n}\n.dream {\n  background: url(\"../assets/flag.png\") no-repeat;\n  background-size: contain;\n}\n.complete {\n  background: orange;\n  background: url(\"../assets/box.png\") no-repeat;\n  background-size: contain;\n}\n.win{\n  height:100%;\n  width:100%;\n  position:absolute;\n  left:0;\n  top:0;\n  background: url(\"../assets/win.png\") no-repeat;\n  background-size: contain;\n  animation: trans 1500ms ease-in 1;\n}\n\n@keyframes trans{\n  from{\n    transform: rotate(0deg);\n  }half{\n    transform: rotate(180deg);\n  }to{\n    transform: rotate(360deg);\n  }\n}\n\n.tips{\n  margin:30px 0;\n  width:500px;\n  word-break: break-all;\n  white-space: pre-line;\n  line-height:2;\n}\n\ninput{\n  border:none;\n  font-size:20px;\n  text-decoration: #c9c9c9 1px solid;\n  margin:10px 0;\n  outline: none;\n}\n\ninput:hover{\n  border:none;\n  /* outline: none; */\n}\n\n.initbtn{\n  line-height:20px;\n  padding:10px;\n  margin-top:10px;\n  font-size:20px;\n  color:white;\n  border:0;\n  background: orange;\n  font-weight: bold;\n  margin-top:50px;\n}\n\n.iconlist{\n  width:260px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n.iconlist .block{\n  line-height:40px;\n  text-align: center;\n}\n\n.initData{\n  margin-bottom: 10px;\n}\n\n</style>\n","import { render } from \"./MapEditor.vue?vue&type=template&id=7c8db42c&scoped=true\"\nimport script from \"./MapEditor.vue?vue&type=script&lang=js\"\nexport * from \"./MapEditor.vue?vue&type=script&lang=js\"\n\nimport \"./MapEditor.vue?vue&type=style&index=0&id=7c8db42c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/box-pusher/box-pusher/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c8db42c\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=3e16f702\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3e16f702&lang=css\"\n\nimport exportComponent from \"/home/runner/work/box-pusher/box-pusher/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=3e16f702&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MapEditor.vue?vue&type=style&index=0&id=7c8db42c&scoped=true&lang=css\""],"sourceRoot":""}